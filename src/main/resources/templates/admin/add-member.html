<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Add Member</title>
    <th:block th:replace="admin/fragments :: css"></th:block>
    <th:block th:replace="admin/fragments :: scripts"></th:block>
</head>
<body>
  
    <th:block th:insert="admin/admin-dashboard :: logo"></th:block>
    <th:block th:insert="admin/admin-dashboard :: sidebar"></th:block>
 <div class="br-header" >
        <div class="br-header-left">
            <div class="navicon-left hidden-md-down"><a id="btnLeftMenu" href="#"><i
                        class="icon ion-navicon-round"></i></a></div>
            <div class="navicon-left hidden-lg-up"><a id="btnLeftMenuMobile" href="#"><i
                        class="icon ion-navicon-round"></i></a></div>
                   <div class="br-pagetitle pt-0 justify-content-space-around">
           
                            <div class="signin-logo tx-center tx-28 tx-bold tx-inverse"><span class="tx-normal"></span> Add <span class="tx-info">Member</span> <span class="tx-normal"></span></div>

            
            
            
        </div>

        </div>
          <th:block th:insert="admin/admin-dashboard :: header"></th:block>
        </div>
    <div class="br-mainpanel">
    <div class="mt-10px my-2 mg-l-40 d-flex justify-content-end">
			                      <a th:href="@{/admin/users}"
									class="btn btn-primary indigo mx-5  mt-2" >Go Back</a>
		</div>
       
        <div class="br-pagebody mt-0">
            <div class="br-section-wrapper pd-20">
			
				<form th:action="@{/admin/add-member}" method="post" th:object="${employee}" enctype="multipart/form-data">
					<div class="form-layout form-layout-1">
						<div class="row mg-b-25">
							<!-- <div class="col-lg-4">
								<div class="form-group mg-b-10-force">
									<label class="form-control-label">Status<span
										class="tx-danger">*</span></label> 
										<select class="form-control select2" th:field="*{status}">
										<option value=""
											th:selected="${employee.status== null}">Choose
											one</option>
										<option value="ACTIVE"
											th:selected="${employee.status == 'ACTIVE'}">ACTIVE</option>
										<option value="INACTIVE"
											th:selected="${employee.status == 'INACTIVE'}">INACTIVE</option>
									</select>
								</div>
							</div> -->
	
							<div class="col-lg-3">
								<div class="form-group">
									<label class="form-control-label">Name: <span
										class="tx-danger">*</span></label> <input class="form-control"
										type="text" name="employeeName" th:field="*{employeeName}"
										 placeholder="Enter Employee Name" required>
										 <span th:if="${#fields.hasErrors('employeeName')}" th:errors="*{employeeName}"></span>
								</div>
							</div>
							 <div class="col-lg-3">
                                    <div class="form-group mg-b-10-force">
                                        <label class="form-control-label">Password <span class="tx-danger">*</span></label> <input
                                            class="form-control" type="password" name="password" th:field="*{password}"
                                            placeholder="Enter password" required>
                                             <span th:if="${#fields.hasErrors('password')}" th:errors="*{password}"></span>
                                    </div>
                                </div>
							<!-- col-4 -->
							<div class="col-lg-3">
								<div class="form-group">
									<label class="form-control-label">Email<span
										class="tx-danger">*</span></label> <input class="form-control"
										type="email" name="email"  th:field="*{email}"
										placeholder="Enter email" required>
										<span th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></span>
								</div>
							</div>
							<div class="col-lg-3">
								<div class="form-group mg-b-10-force">
									<label class="form-control-label">Contact Number <span
										class="tx-danger">*</span></label> <input class="form-control"
										type="text" name="contactNumber" th:field="*{contactNumber}"
										
										placeholder="Enter contact number" required>
										 <span th:if="${#fields.hasErrors('contactNumber')}" th:errors="*{contactNumber}"></span>
								</div>
							</div>
                               
							<!-- col-8 -->
							<div class="col-lg-3">
								<div class="form-group">
									<label class="form-control-label">Profile Picture<span
										class="tx-danger">*</span></label> 
										<input class="form-control" type="file" name="profileFile" accept=".jpg,.jpeg,.png" required>
								</div>
							</div>
							<div class="col-lg-3">
								<div class="form-group">
									<label class="form-control-label">PAN Card<span
										class="tx-danger">*</span></label> 
										<input class="form-control" type="file" name="panCardFile" accept=".jpg,.jpeg,.png,.pdf" required>
								</div>
							</div>
							<!-- col-4 -->
							<div class="col-lg-3">
								<div class="form-group">
									<label class="form-control-label">Adhaar Card<span
										class="tx-danger">*</span></label> <input class="form-control"
										type="file" name="adhaarCardFile" 
										accept=".jpg,.jpeg,.png,.pdf" required>
								</div>
							</div>
							<div class="col-lg-3">
								<div class="form-group">
									<label class="form-control-label">Bank Name<span
										class="tx-danger">*</span></label> <input class="form-control"
										type="text" name="bankName" th:field="*{bankName}" 
										placeholder="Enter account name">
								</div>
							</div>
							<div class="col-lg-3">
								<div class="form-group">
									<label class="form-control-label">IFSC<span
										class="tx-danger">*</span></label> <input class="form-control"
										type="text" name="ifscCode" th:field="*{ifscCode}" 
										placeholder="Enter IFSC Code">
								</div>
							</div>
							<div class="col-lg-3">
								<div class="form-group">
									<label class="form-control-label">Account Number<span
										class="tx-danger">*</span></label> <input class="form-control"
										type="text" name="accountNumber" th:field="*{accountNumber}"
										
										placeholder="Enter account number">
								</div>
							</div>
							<div class="col-lg-3">
								<div class="form-group mg-b-10-force">
									<label class="form-control-label">Employee Type <span
										class="tx-danger">*</span></label> <select
										class="form-control select2" name="employeeType" th:field="*{employeeType}"
										id="employeeType" onchange="toggleFosTypeField()">
										<option value=""
											th:selected="${employee.employeeType == null}">Choose
											one</option>
										<option th:each="type : ${session.employeeTypes}" th:value="${type}"
											th:text="${type}"
											th:selected="${type == employee.employeeType}"></option>
									</select>
								</div>
							</div>

							<div class="col-lg-3" id="fosTypeField"
								th:style="${employee.employeeType == 'FOS' ? 'display:block;' : 'display:none;'}">
								<div class="form-group mg-b-10-force">
									<label class="form-control-label">FOS Type<span
										class="tx-danger">*</span></label> <select
										class="form-control select2" name="fosType" th:field="*{fosType}">

										<option value="" th:selected="${employee.fosType == null}">Choose One</option>

										<option th:each="type : ${session.fosTypes}" th:value="${type}"
											th:text="${type}" th:selected="${type == employee.fosType}"></option>
									</select>
								</div>
							</div>
							<div class="col-lg-3" id="fosTypeField2"
								th:style="${employee.employeeType == 'FOS' ? 'display:block;' : 'display:none;'}">
								<div class="form-group mg-b-10-force">
									<label class="form-control-label">FOS Payment Type<span
										class="tx-danger">*</span></label> <select
										class="form-control select2 commissionfield" name="paymentType" th:field="*{paymentType}"
										onchange="toggleCommisionField()">
										<!-- Default empty option -->
										<option  value="" th:selected="${employee.paymentType == null}">Choose
											one</option>

										<option th:each="type : ${session.paymentTypes}" th:value="${type}"
											th:text="${type}"
											th:selected="${type == employee.paymentType}"></option>
									</select>
								</div>
							</div>
							<!-- col-4 -->
							<!-- FOS Type field, initially hidden -->
							<!-- <div class="col-lg-3">
								<div class="form-group">
									<label class="form-control-label">Salary<span
										class="tx-danger">*</span></label> <input class="form-control"
										type="number" name="salary" th:field="*{salary}"
										placeholder="Enter salary">
								</div>
							</div> -->
							<div class="col-lg-3">
								<div class="form-group mg-b-10-force">
									<label class="form-control-label">Has Incentive <span
										class="tx-danger">*</span></label> <select
										class="form-control select2" name="hasIncentive" th:field="*{hasIncentive}"
										id="hasIncentivefield" onchange="toggleIncentiveField()">
										<option value=""
											th:selected="${employee.hasIncentive == null}">Choose
											one</option>
										<option value="true"
											th:selected="${employee.hasIncentive == true}">Yes</option>
										<option value="false"
											th:selected="${employee.hasIncentive == false}">No</option>
									</select>
								</div>
							</div>
							<!-- <div class="col-lg-3" id="incentiveAmountdiv"
								th:style="${employee.hasIncentive == true ? 'display:block;' : 'display:none;'}">

								<div class="form-group">
									<label class="form-control-label">Incentive Amount<span
										class="tx-danger">*</span></label> <input class="form-control"
										type="number" name="incentiveAmount" th:field="*{incentiveAmount}"
										
										placeholder="Enter Amount">
								</div>
							</div>
							<div class="col-lg-3">
								<div class="form-group">
									<label class="form-control-label">Total Sales<span
										class="tx-danger">*</span></label> <input class="form-control"
										type="number" name="totalSales" th:field="*{totalSales}"
										
										placeholder="Enter total sales">
								</div>
							</div> -->
							<div class="col-lg-3" id="commissionfielddiv"
								th:style="${employee.paymentType == 'Commission' ? 'display:block;' : 'display:none;'}">
								<div class="form-group">
									<label class="form-control-label">Commission Percentage<span
										class="tx-danger">*</span></label> <input class="form-control"
										type="number" name="commisionPercentage" th:field="*{commissionPercentage}"
										
										placeholder="Enter Commision Percentage">
								</div>
							</div>
						</div>
						<!-- row -->
						<div class="form-layout-footer">
							<button class="btn btn-info "style="margin-top: -25px;"  type="submit">Add Member</button>
						</div>
						<!-- form-layout-footer -->
					</div>
					
					<!-- form-layout -->
					<script>
						// Function to toggle visibility of FOS Type field based on Employee Type selection
						function toggleFosTypeField() {
							var employeeType = document
									.getElementById('employeeType').value;
							var fosTypeField = document
									.getElementById('fosTypeField');
							var fosTypeField2 = document
									.getElementById('fosTypeField2');

							// Show the FOS Type field if Employee Type is 'FOS', otherwise hide it
							if (employeeType === 'FOS') {
								fosTypeField.style.display = 'block';
								fosTypeField2.style.display = 'block';
							}

							else {
								fosTypeField.style.display = 'none';
								fosTypeField2.style.display = 'none';
								salesField.style.display = 'none';
							}
						}
						function toggleIncentiveField() {
							var hasIncentivefield = document
									.getElementById('hasIncentivefield').value;
							var incentiveAmountdiv = document
									.getElementById('incentiveAmountdiv');

							// Show the FOS Type field if Employee Type is 'FOS', otherwise hide it
							if (hasIncentivefield === 'true') {
								incentiveAmountdiv.style.display = 'block';

							} else {
								incentiveAmountdiv.style.display = 'none';

							}
						}
						function toggleCommisionField() {
							var commissionfield = document.querySelector('.commissionfield').value;

							var commissionfielddiv = document
									.getElementById('commissionfielddiv');
							if (commissionfield === 'Commission') {
								commissionfielddiv.style.display = 'block';
							} else {
								commissionfielddiv.style.display = 'none';
							}

						}
						document.addEventListener('DOMContentLoaded',
								function() {
									toggleFosTypeField();
									toggleIncentiveField();
									toggleCommisionField();
									
								});
					</script>
				</form>
			</div>
			 <div th:if="${errorMessage}">
                              <script th:inline="javascript">
                              document.addEventListener("DOMContentLoaded", function () {
                               $.SweetAlert.showError(/*[[${errorMessage}]]*/);
                               });
                              </script>
                              </div> 
                               <div th:if="${error}">
                              <script th:inline="javascript">
                              document.addEventListener("DOMContentLoaded", function () {
                               $.SweetAlert.showError(/*[[${error}]]*/);
                               });
                              </script>
                              </div> 
		</div>
		<th:block th:insert="admin/admin-dashboard :: footer"></th:block>
	</div>
	
</body>
</html>
